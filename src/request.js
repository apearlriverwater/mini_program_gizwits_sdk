"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function request(url, options) {
    return new Promise((res, ret) => {
        wx.request(Object.assign({ url }, options, { success: (data) => {
                if (data.data.error_code) {
                    ret({ err: data.data, success: false });
                }
                else {
                    res({ data: data.data, success: true });
                }
            }, fail: (err) => {
                ret({ err, success: false });
            } }));
    });
}
exports.default = request;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVxdWVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJlcXVlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFPQSxTQUF3QixPQUFPLENBQUMsR0FBRyxFQUFFLE9BQU87SUFDMUMsT0FBTyxJQUFJLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUM5QixFQUFFLENBQUMsT0FBTyxpQkFDUixHQUFHLElBQUssT0FBTyxJQUNmLE9BQU8sRUFBRSxDQUFDLElBQVMsRUFBRSxFQUFFO2dCQUNyQixJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFO29CQUN4QixHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztpQkFDekM7cUJBQU07b0JBQ0wsR0FBRyxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7aUJBQ3pDO1lBQ0gsQ0FBQyxFQUNELElBQUksRUFBRSxDQUFDLEdBQVEsRUFBRSxFQUFFO2dCQUNqQixHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7WUFDL0IsQ0FBQyxJQUNELENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUM7QUFoQkQsMEJBZ0JDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXF1ZXN0cyBhIFVSTCwgcmV0dXJuaW5nIGEgcHJvbWlzZS5cbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHVybCAgICAgICBUaGUgVVJMIHdlIHdhbnQgdG8gcmVxdWVzdFxuICogQHBhcmFtICB7b2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgd2Ugd2FudCB0byBwYXNzIHRvIFwiZmV0Y2hcIlxuICogQHJldHVybiB7b2JqZWN0fSAgICAgICAgICAgQW4gb2JqZWN0IGNvbnRhaW5pbmcgZWl0aGVyIFwiZGF0YVwiIG9yIFwiZXJyXCJcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVxdWVzdCh1cmwsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJldCkgPT4ge1xuICAgIHd4LnJlcXVlc3QoeyBcbiAgICAgIHVybCwgLi4ub3B0aW9ucyxcbiAgICAgIHN1Y2Nlc3M6IChkYXRhOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKGRhdGEuZGF0YS5lcnJvcl9jb2RlKSB7XG4gICAgICAgICAgcmV0KHsgZXJyOiBkYXRhLmRhdGEsIHN1Y2Nlc3M6IGZhbHNlIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcyh7IGRhdGE6IGRhdGEuZGF0YSwgc3VjY2VzczogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGZhaWw6IChlcnI6IGFueSkgPT4ge1xuICAgICAgICByZXQoeyBlcnIsIHN1Y2Nlc3M6IGZhbHNlIH0pO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfSk7XG59XG4iXX0=